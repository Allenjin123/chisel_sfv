// Generated by CIRCT 5df90ba8f
module DoubleBuffer(	// @[src/main/scala/Fifo.scala:22:17]
  input        clock,	// @[src/main/scala/Fifo.scala:22:17]
               reset,	// @[src/main/scala/Fifo.scala:22:17]
  output       io_enq_ready,	// @[src/main/scala/Fifo.scala:23:16]
  input        io_enq_valid,	// @[src/main/scala/Fifo.scala:23:16]
  input  [7:0] io_enq_bits,	// @[src/main/scala/Fifo.scala:23:16]
  input        io_deq_ready,	// @[src/main/scala/Fifo.scala:23:16]
  output       io_deq_valid,	// @[src/main/scala/Fifo.scala:23:16]
  output [7:0] io_deq_bits	// @[src/main/scala/Fifo.scala:23:16]
);

  reg  [1:0] stateReg;	// @[src/main/scala/Fifo.scala:26:27]
  reg  [7:0] dataReg;	// @[src/main/scala/Fifo.scala:27:22]
  reg  [7:0] shadowReg;	// @[src/main/scala/Fifo.scala:28:24]
  wire       _io_enq_ready_T = stateReg == 2'h0;	// @[src/main/scala/Fifo.scala:26:27, :30:22]
  wire       _io_deq_valid_T = stateReg == 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20, :58:53]
  wire       _GEN = stateReg == 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :30:22, :33:20]
  wire       _GEN_0 = io_deq_ready & io_enq_valid;	// @[src/main/scala/Fifo.scala:41:28]
  wire       _GEN_1 = ~io_deq_ready & io_enq_valid;	// @[src/main/scala/Fifo.scala:45:{15,29}]
  wire       _GEN_2 = stateReg == 2'h2 & io_deq_ready;	// @[src/main/scala/Fifo.scala:26:27, :27:22, :30:22, :46:20, :51:29, :52:19]
  always @(posedge clock) begin	// @[src/main/scala/Fifo.scala:22:17]
    if (reset)	// @[src/main/scala/Fifo.scala:22:17]
      stateReg <= 2'h0;	// @[src/main/scala/Fifo.scala:26:27]
    else if (_io_enq_ready_T) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (io_enq_valid)	// @[src/main/scala/Fifo.scala:23:16]
        stateReg <= 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20]
    end
    else if (_GEN) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (_GEN_1)	// @[src/main/scala/Fifo.scala:45:29]
        stateReg <= 2'h2;	// @[src/main/scala/Fifo.scala:26:27, :46:20]
      else if (_GEN_0)	// @[src/main/scala/Fifo.scala:41:28]
        stateReg <= 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20]
      else if (io_deq_ready & ~io_enq_valid)	// @[src/main/scala/Fifo.scala:38:{28,31}]
        stateReg <= 2'h0;	// @[src/main/scala/Fifo.scala:26:27]
    end
    else if (_GEN_2)	// @[src/main/scala/Fifo.scala:27:22, :30:22, :51:29, :52:19]
      stateReg <= 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20]
    if (_io_enq_ready_T) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (io_enq_valid)	// @[src/main/scala/Fifo.scala:23:16]
        dataReg <= io_enq_bits;	// @[src/main/scala/Fifo.scala:27:22]
    end
    else if (_GEN) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (_GEN_0)	// @[src/main/scala/Fifo.scala:41:28]
        dataReg <= io_enq_bits;	// @[src/main/scala/Fifo.scala:27:22]
    end
    else if (_GEN_2)	// @[src/main/scala/Fifo.scala:27:22, :30:22, :51:29, :52:19]
      dataReg <= shadowReg;	// @[src/main/scala/Fifo.scala:27:22, :28:24]
    if (_io_enq_ready_T | ~(_GEN & _GEN_1)) begin	// @[src/main/scala/Fifo.scala:28:24, :30:22, :45:{29,46}, :47:21]
    end
    else	// @[src/main/scala/Fifo.scala:28:24, :30:22]
      shadowReg <= io_enq_bits;	// @[src/main/scala/Fifo.scala:28:24]
  end // always @(posedge)
  assign io_enq_ready = _io_enq_ready_T | _io_deq_valid_T;	// @[src/main/scala/Fifo.scala:22:17, :30:22, :58:{41,53}]
  assign io_deq_valid = _io_deq_valid_T | stateReg == 2'h2;	// @[src/main/scala/Fifo.scala:22:17, :26:27, :46:20, :58:53, :59:{39,51}]
  assign io_deq_bits = dataReg;	// @[src/main/scala/Fifo.scala:22:17, :27:22]
endmodule

module DoubleBufferFifo(	// @[src/main/scala/Fifo.scala:20:7]
  input        clock,	// @[src/main/scala/Fifo.scala:20:7]
               reset,	// @[src/main/scala/Fifo.scala:20:7]
  output       io_enq_ready,	// @[src/main/scala/Fifo.scala:12:14]
  input        io_enq_valid,	// @[src/main/scala/Fifo.scala:12:14]
  input  [7:0] io_enq_bits,	// @[src/main/scala/Fifo.scala:12:14]
  input        io_deq_ready,	// @[src/main/scala/Fifo.scala:12:14]
  output       io_deq_valid,	// @[src/main/scala/Fifo.scala:12:14]
  output [7:0] io_deq_bits	// @[src/main/scala/Fifo.scala:12:14]
);

  wire       _DoubleBuffer_1_io_enq_ready;	// @[src/main/scala/Fifo.scala:63:57]
  wire       _DoubleBuffer_io_deq_valid;	// @[src/main/scala/Fifo.scala:63:57]
  wire [7:0] _DoubleBuffer_io_deq_bits;	// @[src/main/scala/Fifo.scala:63:57]
  DoubleBuffer DoubleBuffer (	// @[src/main/scala/Fifo.scala:63:57]
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (io_enq_ready),
    .io_enq_valid (io_enq_valid),
    .io_enq_bits  (io_enq_bits),
    .io_deq_ready (_DoubleBuffer_1_io_enq_ready),	// @[src/main/scala/Fifo.scala:63:57]
    .io_deq_valid (_DoubleBuffer_io_deq_valid),
    .io_deq_bits  (_DoubleBuffer_io_deq_bits)
  );	// @[src/main/scala/Fifo.scala:63:57]
  DoubleBuffer DoubleBuffer_1 (	// @[src/main/scala/Fifo.scala:63:57]
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (_DoubleBuffer_1_io_enq_ready),
    .io_enq_valid (_DoubleBuffer_io_deq_valid),	// @[src/main/scala/Fifo.scala:63:57]
    .io_enq_bits  (_DoubleBuffer_io_deq_bits),	// @[src/main/scala/Fifo.scala:63:57]
    .io_deq_ready (io_deq_ready),
    .io_deq_valid (io_deq_valid),
    .io_deq_bits  (io_deq_bits)
  );	// @[src/main/scala/Fifo.scala:63:57]
endmodule

module DoubleBufferFifoTop(	// @[src/main/scala/Fifo.scala:73:7]
  input        clock,	// @[src/main/scala/Fifo.scala:73:7]
               reset,	// @[src/main/scala/Fifo.scala:73:7]
  output       io_enq_ready,	// @[src/main/scala/Fifo.scala:74:14]
  input        io_enq_valid,	// @[src/main/scala/Fifo.scala:74:14]
  input  [7:0] io_enq_bits,	// @[src/main/scala/Fifo.scala:74:14]
  input        io_deq_ready,	// @[src/main/scala/Fifo.scala:74:14]
  output       io_deq_valid,	// @[src/main/scala/Fifo.scala:74:14]
  output [7:0] io_deq_bits	// @[src/main/scala/Fifo.scala:74:14]
);

  DoubleBufferFifo fifo (	// @[src/main/scala/Fifo.scala:75:20]
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (io_enq_ready),
    .io_enq_valid (io_enq_valid),
    .io_enq_bits  (io_enq_bits),
    .io_deq_ready (io_deq_ready),
    .io_deq_valid (io_deq_valid),
    .io_deq_bits  (io_deq_bits)
  );	// @[src/main/scala/Fifo.scala:75:20]
endmodule

