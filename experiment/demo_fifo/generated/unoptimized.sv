// Generated by CIRCT firtool-1.62.0
module DoubleBuffer(
  input        clock,
               reset,
  output       io_enq_ready,
  input        io_enq_valid,
  input  [7:0] io_enq_bits,
  input        io_deq_ready,
  output       io_deq_valid,
  output [7:0] io_deq_bits
);

  wire       io_enq_valid_0 = io_enq_valid;
  wire [7:0] io_enq_bits_0 = io_enq_bits;
  wire       io_deq_ready_0 = io_deq_ready;
  wire       _io_enq_ready_T_2;
  wire       _io_deq_valid_T_2;
  reg  [1:0] stateReg;
  reg  [7:0] dataReg;
  wire [7:0] io_deq_bits_0 = dataReg;
  reg  [7:0] shadowReg;
  wire       _GEN = 2'h0 == stateReg;
  wire       _GEN_0 = ~_GEN;
  wire       _GEN_1 = 2'h1 == stateReg;
  wire       _GEN_2 = _GEN_0 & _GEN_1;
  wire       _GEN_3 = io_deq_ready_0 & io_enq_valid_0 == 1'h0;
  wire       _GEN_4 = io_deq_ready_0 & io_enq_valid_0;
  wire       _GEN_5 = io_deq_ready_0 == 1'h0 & io_enq_valid_0;
  wire       _GEN_6 = 2'h2 == stateReg;
  wire       _io_enq_ready_T = stateReg == 2'h0;
  wire       _io_enq_ready_T_1 = stateReg == 2'h1;
  assign _io_enq_ready_T_2 = _io_enq_ready_T | _io_enq_ready_T_1;
  wire       io_enq_ready_0 = _io_enq_ready_T_2;
  wire       _io_deq_valid_T = stateReg == 2'h1;
  wire       _io_deq_valid_T_1 = stateReg == 2'h2;
  assign _io_deq_valid_T_2 = _io_deq_valid_T | _io_deq_valid_T_1;
  wire       io_deq_valid_0 = _io_deq_valid_T_2;
  always @(posedge clock) begin
    if (reset)
      stateReg <= 2'h0;
    else if (_GEN) begin
      if (io_enq_valid_0)
        stateReg <= 2'h1;
      else begin
      end
    end
    else if (_GEN_1) begin
      if (_GEN_5)
        stateReg <= 2'h2;
      else if (_GEN_4)
        stateReg <= 2'h1;
      else if (_GEN_3)
        stateReg <= 2'h0;
      else begin
      end
    end
    else if (_GEN_6) begin
      if (io_deq_ready_0)
        stateReg <= 2'h1;
      else begin
      end
    end
    else begin
    end
  end // always @(posedge)
  always @(posedge clock) begin
    if (_GEN) begin
      if (io_enq_valid_0)
        dataReg <= io_enq_bits_0;
      else begin
      end
    end
    else if (_GEN_1) begin
      if (_GEN_4)
        dataReg <= io_enq_bits_0;
      else begin
      end
      if (_GEN_5)
        shadowReg <= io_enq_bits_0;
      else begin
      end
    end
    else if (_GEN_6) begin
      if (io_deq_ready_0)
        dataReg <= shadowReg;
      else begin
      end
    end
    else begin
    end
  end // always @(posedge)
  assign io_enq_ready = io_enq_ready_0;
  assign io_deq_valid = io_deq_valid_0;
  assign io_deq_bits = io_deq_bits_0;
endmodule

module DoubleBufferFifo(
  input        clock,
               reset,
  output       io_enq_ready,
  input        io_enq_valid,
  input  [7:0] io_enq_bits,
  input        io_deq_ready,
  output       io_deq_valid,
  output [7:0] io_deq_bits
);

  wire [7:0] _GEN;
  wire       _GEN_0;
  wire       io_enq_valid_0 = io_enq_valid;
  wire [7:0] io_enq_bits_0 = io_enq_bits;
  wire       io_deq_ready_0 = io_deq_ready;
  wire       _GEN_1;
  wire       _GEN_2 = io_enq_valid_0;
  wire [7:0] _GEN_3 = io_enq_bits_0;
  wire       _GEN_4 = io_deq_ready_0;
  wire       _GEN_5;
  wire [7:0] _GEN_6;
  wire       _GEN_7;
  DoubleBuffer DoubleBuffer (
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (_GEN_1),
    .io_enq_valid (_GEN_2),
    .io_enq_bits  (_GEN_3),
    .io_deq_ready (_GEN_7),
    .io_deq_valid (_GEN_0),
    .io_deq_bits  (_GEN)
  );
  wire       io_enq_ready_0 = _GEN_1;
  wire       _GEN_8;
  wire       _GEN_9 = _GEN_0;
  wire [7:0] _GEN_10 = _GEN;
  DoubleBuffer DoubleBuffer_1 (
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (_GEN_8),
    .io_enq_valid (_GEN_9),
    .io_enq_bits  (_GEN_10),
    .io_deq_ready (_GEN_4),
    .io_deq_valid (_GEN_5),
    .io_deq_bits  (_GEN_6)
  );
  assign _GEN_7 = _GEN_8;
  wire       io_deq_valid_0 = _GEN_5;
  wire [7:0] io_deq_bits_0 = _GEN_6;
  assign io_enq_ready = io_enq_ready_0;
  assign io_deq_valid = io_deq_valid_0;
  assign io_deq_bits = io_deq_bits_0;
endmodule

module DoubleBufferFifoTop(
  input        clock,
               reset,
  output       io_enq_ready,
  input        io_enq_valid,
  input  [7:0] io_enq_bits,
  input        io_deq_ready,
  output       io_deq_valid,
  output [7:0] io_deq_bits
);

  wire       io_enq_valid_0 = io_enq_valid;
  wire [7:0] io_enq_bits_0 = io_enq_bits;
  wire       io_deq_ready_0 = io_deq_ready;
  wire       _GEN;
  wire       _GEN_0 = io_enq_valid_0;
  wire [7:0] _GEN_1 = io_enq_bits_0;
  wire       _GEN_2 = io_deq_ready_0;
  wire       _GEN_3;
  wire [7:0] _GEN_4;
  DoubleBufferFifo fifo (
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (_GEN),
    .io_enq_valid (_GEN_0),
    .io_enq_bits  (_GEN_1),
    .io_deq_ready (_GEN_2),
    .io_deq_valid (_GEN_3),
    .io_deq_bits  (_GEN_4)
  );
  wire       io_enq_ready_0 = _GEN;
  wire       io_deq_valid_0 = _GEN_3;
  wire [7:0] io_deq_bits_0 = _GEN_4;
  assign io_enq_ready = io_enq_ready_0;
  assign io_deq_valid = io_deq_valid_0;
  assign io_deq_bits = io_deq_bits_0;
endmodule

