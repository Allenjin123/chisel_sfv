// Generated by CIRCT 5df90ba8f
module DoubleBuffer(	// @[src/main/scala/Fifo.scala:22:17]
  input        clock,	// @[src/main/scala/Fifo.scala:22:17]
               reset,	// @[src/main/scala/Fifo.scala:22:17]
  output       io_enq_ready,	// @[src/main/scala/Fifo.scala:23:16]
  input        io_enq_valid,	// @[src/main/scala/Fifo.scala:23:16]
  input  [7:0] io_enq_bits,	// @[src/main/scala/Fifo.scala:23:16]
  input        io_deq_ready,	// @[src/main/scala/Fifo.scala:23:16]
  output       io_deq_valid,	// @[src/main/scala/Fifo.scala:23:16]
  output [7:0] io_deq_bits	// @[src/main/scala/Fifo.scala:23:16]
);

  wire       io_enq_valid_0 = io_enq_valid;	// @[src/main/scala/Fifo.scala:22:17]
  wire [7:0] io_enq_bits_0 = io_enq_bits;	// @[src/main/scala/Fifo.scala:22:17]
  wire       io_deq_ready_0 = io_deq_ready;	// @[src/main/scala/Fifo.scala:22:17]
  wire       _io_enq_ready_T_2;	// @[src/main/scala/Fifo.scala:58:41]
  wire       _io_deq_valid_T_2;	// @[src/main/scala/Fifo.scala:59:39]
  reg  [1:0] stateReg;	// @[src/main/scala/Fifo.scala:26:27]
  reg  [7:0] dataReg;	// @[src/main/scala/Fifo.scala:27:22]
  wire [7:0] io_deq_bits_0 = dataReg;	// @[src/main/scala/Fifo.scala:22:17, :27:22]
  reg  [7:0] shadowReg;	// @[src/main/scala/Fifo.scala:28:24]
  wire       _GEN = 2'h0 == stateReg;	// @[src/main/scala/Fifo.scala:26:27, :30:22]
  wire       _GEN_0 = ~_GEN;	// @[src/main/scala/Fifo.scala:30:22]
  wire       _GEN_1 = 2'h1 == stateReg;	// @[src/main/scala/Fifo.scala:26:27, :30:22, :33:20]
  wire       _GEN_2 = _GEN_0 & _GEN_1;	// @[src/main/scala/Fifo.scala:30:22]
  wire       _GEN_3 = io_deq_ready_0 & io_enq_valid_0 == 1'h0;	// @[src/main/scala/Fifo.scala:22:17, :38:{28,31}]
  wire       _GEN_4 = io_deq_ready_0 & io_enq_valid_0;	// @[src/main/scala/Fifo.scala:22:17, :41:28]
  wire       _GEN_5 = io_deq_ready_0 == 1'h0 & io_enq_valid_0;	// @[src/main/scala/Fifo.scala:22:17, :38:31, :45:{15,29}]
  wire       _GEN_6 = 2'h2 == stateReg;	// @[src/main/scala/Fifo.scala:26:27, :30:22, :46:20]
  wire       _io_enq_ready_T = stateReg == 2'h0;	// @[src/main/scala/Fifo.scala:26:27, :58:31]
  wire       _io_enq_ready_T_1 = stateReg == 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20, :58:53]
  assign _io_enq_ready_T_2 = _io_enq_ready_T | _io_enq_ready_T_1;	// @[src/main/scala/Fifo.scala:58:{31,41,53}]
  wire       io_enq_ready_0 = _io_enq_ready_T_2;	// @[src/main/scala/Fifo.scala:22:17, :58:41]
  wire       _io_deq_valid_T = stateReg == 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20, :59:31]
  wire       _io_deq_valid_T_1 = stateReg == 2'h2;	// @[src/main/scala/Fifo.scala:26:27, :46:20, :59:51]
  assign _io_deq_valid_T_2 = _io_deq_valid_T | _io_deq_valid_T_1;	// @[src/main/scala/Fifo.scala:59:{31,39,51}]
  wire       io_deq_valid_0 = _io_deq_valid_T_2;	// @[src/main/scala/Fifo.scala:22:17, :59:39]
  always @(posedge clock) begin	// @[src/main/scala/Fifo.scala:22:17]
    if (reset)	// @[src/main/scala/Fifo.scala:22:17]
      stateReg <= 2'h0;	// @[src/main/scala/Fifo.scala:26:27]
    else if (_GEN) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (io_enq_valid_0)	// @[src/main/scala/Fifo.scala:22:17]
        stateReg <= 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20]
      else begin	// @[src/main/scala/Fifo.scala:22:17]
      end
    end
    else if (_GEN_1) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (_GEN_5)	// @[src/main/scala/Fifo.scala:45:29]
        stateReg <= 2'h2;	// @[src/main/scala/Fifo.scala:26:27, :46:20]
      else if (_GEN_4)	// @[src/main/scala/Fifo.scala:41:28]
        stateReg <= 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20]
      else if (_GEN_3)	// @[src/main/scala/Fifo.scala:38:28]
        stateReg <= 2'h0;	// @[src/main/scala/Fifo.scala:26:27]
      else begin	// @[src/main/scala/Fifo.scala:38:28]
      end
    end
    else if (_GEN_6) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (io_deq_ready_0)	// @[src/main/scala/Fifo.scala:22:17]
        stateReg <= 2'h1;	// @[src/main/scala/Fifo.scala:26:27, :33:20]
      else begin	// @[src/main/scala/Fifo.scala:22:17]
      end
    end
    else begin	// @[src/main/scala/Fifo.scala:30:22]
    end
  end // always @(posedge)
  always @(posedge clock) begin	// @[src/main/scala/Fifo.scala:22:17]
    if (_GEN) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (io_enq_valid_0)	// @[src/main/scala/Fifo.scala:22:17]
        dataReg <= io_enq_bits_0;	// @[src/main/scala/Fifo.scala:22:17, :27:22]
      else begin	// @[src/main/scala/Fifo.scala:22:17]
      end
    end
    else if (_GEN_1) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (_GEN_4)	// @[src/main/scala/Fifo.scala:41:28]
        dataReg <= io_enq_bits_0;	// @[src/main/scala/Fifo.scala:22:17, :27:22]
      else begin	// @[src/main/scala/Fifo.scala:41:28]
      end
      if (_GEN_5)	// @[src/main/scala/Fifo.scala:45:29]
        shadowReg <= io_enq_bits_0;	// @[src/main/scala/Fifo.scala:22:17, :28:24]
      else begin	// @[src/main/scala/Fifo.scala:45:29]
      end
    end
    else if (_GEN_6) begin	// @[src/main/scala/Fifo.scala:30:22]
      if (io_deq_ready_0)	// @[src/main/scala/Fifo.scala:22:17]
        dataReg <= shadowReg;	// @[src/main/scala/Fifo.scala:27:22, :28:24]
      else begin	// @[src/main/scala/Fifo.scala:22:17]
      end
    end
    else begin	// @[src/main/scala/Fifo.scala:30:22]
    end
  end // always @(posedge)
  assign io_enq_ready = io_enq_ready_0;	// @[src/main/scala/Fifo.scala:22:17]
  assign io_deq_valid = io_deq_valid_0;	// @[src/main/scala/Fifo.scala:22:17]
  assign io_deq_bits = io_deq_bits_0;	// @[src/main/scala/Fifo.scala:22:17]
endmodule

module DoubleBufferFifo(	// @[src/main/scala/Fifo.scala:20:7]
  input        clock,	// @[src/main/scala/Fifo.scala:20:7]
               reset,	// @[src/main/scala/Fifo.scala:20:7]
  output       io_enq_ready,	// @[src/main/scala/Fifo.scala:12:14]
  input        io_enq_valid,	// @[src/main/scala/Fifo.scala:12:14]
  input  [7:0] io_enq_bits,	// @[src/main/scala/Fifo.scala:12:14]
  input        io_deq_ready,	// @[src/main/scala/Fifo.scala:12:14]
  output       io_deq_valid,	// @[src/main/scala/Fifo.scala:12:14]
  output [7:0] io_deq_bits	// @[src/main/scala/Fifo.scala:12:14]
);

  wire [7:0] DoubleBuffer_io_deq_bits;	// @[src/main/scala/Fifo.scala:63:57]
  wire       DoubleBuffer_io_deq_valid;	// @[src/main/scala/Fifo.scala:63:57]
  wire       io_enq_valid_0 = io_enq_valid;	// @[src/main/scala/Fifo.scala:20:7]
  wire [7:0] io_enq_bits_0 = io_enq_bits;	// @[src/main/scala/Fifo.scala:20:7]
  wire       io_deq_ready_0 = io_deq_ready;	// @[src/main/scala/Fifo.scala:20:7]
  wire       DoubleBuffer_io_enq_ready;	// @[src/main/scala/Fifo.scala:63:57]
  wire       DoubleBuffer_io_enq_valid = io_enq_valid_0;	// @[src/main/scala/Fifo.scala:20:7, :63:57]
  wire [7:0] DoubleBuffer_io_enq_bits = io_enq_bits_0;	// @[src/main/scala/Fifo.scala:20:7, :63:57]
  wire       DoubleBuffer_1_io_deq_ready = io_deq_ready_0;	// @[src/main/scala/Fifo.scala:20:7, :63:57]
  wire       DoubleBuffer_1_io_deq_valid;	// @[src/main/scala/Fifo.scala:63:57]
  wire [7:0] DoubleBuffer_1_io_deq_bits;	// @[src/main/scala/Fifo.scala:63:57]
  wire       DoubleBuffer_io_deq_ready;	// @[src/main/scala/Fifo.scala:63:57]
  DoubleBuffer DoubleBuffer (	// @[src/main/scala/Fifo.scala:63:57]
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (DoubleBuffer_io_enq_ready),
    .io_enq_valid (DoubleBuffer_io_enq_valid),	// @[src/main/scala/Fifo.scala:63:57]
    .io_enq_bits  (DoubleBuffer_io_enq_bits),	// @[src/main/scala/Fifo.scala:63:57]
    .io_deq_ready (DoubleBuffer_io_deq_ready),	// @[src/main/scala/Fifo.scala:63:57]
    .io_deq_valid (DoubleBuffer_io_deq_valid),
    .io_deq_bits  (DoubleBuffer_io_deq_bits)
  );	// @[src/main/scala/Fifo.scala:63:57]
  wire       io_enq_ready_0 = DoubleBuffer_io_enq_ready;	// @[src/main/scala/Fifo.scala:20:7, :63:57]
  wire       DoubleBuffer_1_io_enq_ready;	// @[src/main/scala/Fifo.scala:63:57]
  wire       DoubleBuffer_1_io_enq_valid = DoubleBuffer_io_deq_valid;	// @[src/main/scala/Fifo.scala:63:57]
  wire [7:0] DoubleBuffer_1_io_enq_bits = DoubleBuffer_io_deq_bits;	// @[src/main/scala/Fifo.scala:63:57]
  DoubleBuffer DoubleBuffer_1 (	// @[src/main/scala/Fifo.scala:63:57]
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (DoubleBuffer_1_io_enq_ready),
    .io_enq_valid (DoubleBuffer_1_io_enq_valid),	// @[src/main/scala/Fifo.scala:63:57]
    .io_enq_bits  (DoubleBuffer_1_io_enq_bits),	// @[src/main/scala/Fifo.scala:63:57]
    .io_deq_ready (DoubleBuffer_1_io_deq_ready),	// @[src/main/scala/Fifo.scala:63:57]
    .io_deq_valid (DoubleBuffer_1_io_deq_valid),
    .io_deq_bits  (DoubleBuffer_1_io_deq_bits)
  );	// @[src/main/scala/Fifo.scala:63:57]
  assign DoubleBuffer_io_deq_ready = DoubleBuffer_1_io_enq_ready;	// @[src/main/scala/Fifo.scala:63:57]
  wire       io_deq_valid_0 = DoubleBuffer_1_io_deq_valid;	// @[src/main/scala/Fifo.scala:20:7, :63:57]
  wire [7:0] io_deq_bits_0 = DoubleBuffer_1_io_deq_bits;	// @[src/main/scala/Fifo.scala:20:7, :63:57]
  assign io_enq_ready = io_enq_ready_0;	// @[src/main/scala/Fifo.scala:20:7]
  assign io_deq_valid = io_deq_valid_0;	// @[src/main/scala/Fifo.scala:20:7]
  assign io_deq_bits = io_deq_bits_0;	// @[src/main/scala/Fifo.scala:20:7]
endmodule

module DoubleBufferFifoTop(	// @[src/main/scala/Fifo.scala:73:7]
  input        clock,	// @[src/main/scala/Fifo.scala:73:7]
               reset,	// @[src/main/scala/Fifo.scala:73:7]
  output       io_enq_ready,	// @[src/main/scala/Fifo.scala:74:14]
  input        io_enq_valid,	// @[src/main/scala/Fifo.scala:74:14]
  input  [7:0] io_enq_bits,	// @[src/main/scala/Fifo.scala:74:14]
  input        io_deq_ready,	// @[src/main/scala/Fifo.scala:74:14]
  output       io_deq_valid,	// @[src/main/scala/Fifo.scala:74:14]
  output [7:0] io_deq_bits	// @[src/main/scala/Fifo.scala:74:14]
);

  wire       io_enq_valid_0 = io_enq_valid;	// @[src/main/scala/Fifo.scala:73:7]
  wire [7:0] io_enq_bits_0 = io_enq_bits;	// @[src/main/scala/Fifo.scala:73:7]
  wire       io_deq_ready_0 = io_deq_ready;	// @[src/main/scala/Fifo.scala:73:7]
  wire       fifo_io_enq_ready;	// @[src/main/scala/Fifo.scala:75:20]
  wire       fifo_io_enq_valid = io_enq_valid_0;	// @[src/main/scala/Fifo.scala:73:7, :75:20]
  wire [7:0] fifo_io_enq_bits = io_enq_bits_0;	// @[src/main/scala/Fifo.scala:73:7, :75:20]
  wire       fifo_io_deq_ready = io_deq_ready_0;	// @[src/main/scala/Fifo.scala:73:7, :75:20]
  wire       fifo_io_deq_valid;	// @[src/main/scala/Fifo.scala:75:20]
  wire [7:0] fifo_io_deq_bits;	// @[src/main/scala/Fifo.scala:75:20]
  DoubleBufferFifo fifo (	// @[src/main/scala/Fifo.scala:75:20]
    .clock        (clock),
    .reset        (reset),
    .io_enq_ready (fifo_io_enq_ready),
    .io_enq_valid (fifo_io_enq_valid),	// @[src/main/scala/Fifo.scala:75:20]
    .io_enq_bits  (fifo_io_enq_bits),	// @[src/main/scala/Fifo.scala:75:20]
    .io_deq_ready (fifo_io_deq_ready),	// @[src/main/scala/Fifo.scala:75:20]
    .io_deq_valid (fifo_io_deq_valid),
    .io_deq_bits  (fifo_io_deq_bits)
  );	// @[src/main/scala/Fifo.scala:75:20]
  wire       io_enq_ready_0 = fifo_io_enq_ready;	// @[src/main/scala/Fifo.scala:73:7, :75:20]
  wire       io_deq_valid_0 = fifo_io_deq_valid;	// @[src/main/scala/Fifo.scala:73:7, :75:20]
  wire [7:0] io_deq_bits_0 = fifo_io_deq_bits;	// @[src/main/scala/Fifo.scala:73:7, :75:20]
  assign io_enq_ready = io_enq_ready_0;	// @[src/main/scala/Fifo.scala:73:7]
  assign io_deq_valid = io_deq_valid_0;	// @[src/main/scala/Fifo.scala:73:7]
  assign io_deq_bits = io_deq_bits_0;	// @[src/main/scala/Fifo.scala:73:7]
endmodule

